<!DOCTYPE html>
<!--  Last Published: Tue Jun 18 2019 12:36:49 GMT+0000 (UTC)  -->
<html data-wf-page="5cbdac86ef4522067e921ce1" data-wf-site="5b27ad71f471c80738d206f5">
<head>
  <meta charset="utf-8">
  <title>Variants Library</title>
  <meta content="Utilize some of our pre-made advanced JS variants for plug-and-play setup, including auso country selections, form shorteners etc&#x27;." name="description">
  <meta content="Variants Library" property="og:title">
  <meta content="Utilize some of our pre-made advanced JS variants for plug-and-play setup, including auso country selections, form shorteners etc&#x27;." property="og:description">
  <meta content="summary" name="twitter:card">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="../css/normalize.css" rel="stylesheet" type="text/css">
  <link href="../css/components.css" rel="stylesheet" type="text/css">
  <link href="../css/twik-v3.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">
      WebFont.load({
        google: {
          families: ["Lato:100,100italic,300,300italic,400,400italic,700,700italic,900,900italic", "Inconsolata:400,700", "Poppins:300,regular,500"]
        }
      });
    </script>
  <script src="https://use.typekit.net/dbi5cdt.js" type="text/javascript"></script>
  <script type="text/javascript">
      try {
        Typekit.load();
      } catch (e) {}
    </script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">
      ! function(o, c) {
        var n = c.documentElement,
          t = " w-mod-";
        n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch")
      }(window, document);
    </script>
  <link href="../images/smallfav.png" rel="shortcut icon" type="image/x-icon">
  <link href="../images/favicon.png" rel="apple-touch-icon">
  <style>
      body {
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;
      }
      .stickydiv {
        position: sticky;
        top: 98px;
      }
      @media (max-width: 479px) {
        .maincontentallwidth {
          max-width: calc(100% + 36px) !important;
          min-width: calc(100% + 36px) !important;
        }
        .introheader {
          min-height: max-content;
        }
      }
      @media (max-width: 991px) {
        .halfcolimg {
          width: calc(100% + 64px);
        }
      }
      @media (max-width: 479px) {
        .halfcolimg {
          width: calc(100% + 34px);
        }
      }
      img.image-59 {
        object-fit: cover;
      }
      .w-slider-mask {
        height: max-content !important;
      }
      .w-slider {
        height: max-content !important;
      }
    </style>
  <script>
      if ((new RegExp('^(www\\.)?twik-v3\\.webflow\\.io')).test(location.host)) {
        if (!document.body) {
          document.write('<scr' + 'ipt id="twik_code" data-twik="5bc5e2e8a663e" src="https://www.twik.io/contentScript.js"></scr' + 'ipt>')
        } else {
          var twik_script = document.createElement('script');
          twik_script.setAttribute('data-twik', '5bc5e2e8a663e');
          twik_script.id = 'twik_code';
          twik_script.src = 'https://www.twik.io/contentScript.js';
          document.body.appendChild(twik_script);
        }
      }
    </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.16.0/themes/prism.css" rel="stylesheet">
  <style>
      /* width */
      language-javascriptb ::-webkit-scrollbar {
        width: 10px;
      }
      /* Track */
      language-javascript ::-webkit-scrollbar-track {
        background: #f1f1f1;
      }
      /* Handle */
      language-javascript ::-webkit-scrollbar-thumb {
        background: #888;
      }
      /* Handle on hover */
      language-javascript ::-webkit-scrollbar-thumb:hover {
        background: #555;
      }
      pre.language-javascript {
        margin-top: 0;
      }
    </style>
</head>
<body>
  <div wp="general" el="shortcode">[udesly-boxes slug=&quot;header-nav&quot;]<br></div>
  <div class="introheader openingsec javascriptsection">
    <div class="w-container">
      <h1 class="mainheading marginbottom12">Variants Library</h1>
      <div class="max640 centeralign">
        <div>Utilize some of our pre-made advanced JS variants for plug-and-play setup, including auso country selections, form shorteners etc&#x27;.<a href="http://twik-v2.webflow.io/#"><br></a></div>
      </div>
    </div>
  </div>
  <div class="regularsection">
    <div class="reg1440">
      <div class="flexpuresides">
        <div class="_50w">
          <h2>Autoselect country and state</h2>
          <p>Use Twik&#x27;s integrated country-detection feature to automatically select the user&#x27;s country if there is a dropdown in your form. If the user is from the United States and the form contains a dropdown for state, Twik autoselects that too.</p>
        </div>
        <div class="_50w">
          <div class="div-block-153">
            <div class="heightmax w-embed">
              <pre class="language-javascript">
<code>
var data = window.twik_user_data.location;
var selectTags = document.getElementsByTagName('select');
var dom, domState;
function check(rest_locations, locations){
	var count = 0;
	for (var i = 0; i < rest_locations.length; i++) {
		for (var j = 0; j < locations.length; j++) {
			if ((locations[j].toLowerCase() == rest_locations[i].name.toLowerCase()) || (locations[j].toLowerCase() == rest_locations[i].code.toLowerCase())) count++;
		}
	}
	return count > 30 ? true : false;
}
function state_select(){
	var rest_states = [];
	var xhttp_state_us = new XMLHttpRequest();
	xhttp_state_us.onreadystatechange = function() {
	    if (this.readyState == 4 && this.status == 200) {
	    	for(var item of JSON.parse(xhttp_state_us.responseText).features){
	       		rest_states.push({
	       			"name": item.attributes.STATE_NAME,
	       			"code": item.attributes.STATE_ABBR
	       		});
	       	}
	       	for (var i = 0; i < selectTags.length; i++) {
			  	var _locations = [];
			  	for (var j = 0; j < selectTags[i].length; j++) {
					_locations.push(selectTags[i][j].value);
			  	}
			  	if (check(rest_states, _locations)) {
				    domState = selectTags[i];
			  	}
			}
			var states = [];
			for (var i = 0; i < domState.length; i++) {
			  	states.push(domState[i].value);
			}
			if (domState[0].value.length == 3) {
			  	domState[states.toLowerCase().indexOf(data.state.toLowerCase())].selected = true;
			} else {
				var _state = "";
				for(var i = 0; i < rest_states.length; i++){
					if(rest_states[i].code.toLowerCase() == data.state.toLowerCase()){
						_state = rest_states[i].name;
					}
				}
			  	for (var i = 0; i < states.length; i++) {
			    	if (states[i].toLowerCase().indexOf(_state) != -1) {
			      		domState[i].selected = true;
			    	}
			  	}
			}
	    }
	};
	xhttp_state_us.open("GET", "https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/USA_States_Generalized/FeatureServer/0/query?where=1%3D1&outFields=STATE_NAME,STATE_ABBR&outSR=4326&f=json", true);
	xhttp_state_us.send();
}
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
    	var rest_countries = [];
       	for(var item of JSON.parse(xhttp.responseText)){
       		rest_countries.push({
       			"name": item.name,
       			"code": item.alpha2Code
       		});
       	}
		for (var i = 0; i < selectTags.length; i++) {
		  	var _locations = [];
		  	for (var j = 0; j < selectTags[i].length; j++) {
				_locations.push(selectTags[i][j].value);
		  	}
		  	if (check(rest_countries, _locations)) {
			    dom = selectTags[i];
		  	}
		}
		var countries = [];
		for (var i = 0; i < dom.length; i++) {
		  	countries.push(dom[i].value);
		}
		if (dom[0].value.length == 2) {
		  	dom[countries.toLowerCase().indexOf(data.iso_code.toLowerCase())].selected = true;
		} else {
		  	for (var i = 0; i < countries.length; i++) {
		    	if (countries[i].toLowerCase().indexOf(data.country.toLowerCase()) != -1) {
		      		dom[i].selected = true;
		    	}
		  	}
		}
		if (data.country.toLowerCase() === "united states" || data.iso_code.toLowerCase() === 'us'){
			state_select();
		}
    }
};
xhttp.open("GET", "https://restcountries.eu/rest/v2/all", true);
xhttp.send();
</code>
</pre>
            </div><a href="#" class="button fullwidth100 nomarginbottom w-button">Copy to clipboard</a></div>
        </div>
      </div>
      <div class="flexpuresides">
        <div class="_50w">
          <h2>Sort elements</h2>
          <p>Select a parent div in the inspector and create a new Javascript variant. Paste the following script and change the keyword in the 3rd line (in this case, SEO) to your desired keyword. Elements inside the selected div will now be sorted by your chosen keyword according to its density.</p>
        </div>
        <div class="_50w">
          <div class="div-block-153">
            <div class="heightmax w-embed">
              <pre class="language-javascript">
<code>
var parent;
if(twik_tags != null){
	for(var tag of twik_tags){
		if (tag.name == "sortme"){
			parent = tag.selector;
		}
	}
}
var childs = [...parent.children];
var keyword = "SEO";
var seed = [];
var index = 0;
var result_tags = [];
function count(main_str, sub_str) {
	main_str += '';
	sub_str += '';
	if (sub_str.length <= 0)="" {="" return="" main_str.length="" +="" 1;="" }="" substr="sub_str.replace(/[.*+?^${}()|[\]\\]/g," '\\$&');="" (main_str.match(new="" regexp(substr,="" 'gi'))="" ||="" []).length;="" for(var="" child="" of="" childs){="" index="" ++;="" var="" _count="count(child.innerHTML," keyword);="" seed.push({="" index:="" index,="" density:="" (keyword.length="" *="" 100)="" child.innerhtml.length="" });="" if(childs[0].classname="" !="childs[1].className){" seed[0].density="100;" seed.sort((a,="" b)=""> (a.density > b.density) ? -1 : 1);
for(var item of seed){
	result_tags.push(parent.children[item.index - 1]);
}
while (parent.firstChild) {
    parent.removeChild(parent.firstChild);
}
for(var item of result_tags){
	parent.appendChild(item);
}
</=></code>
</pre>
            </div><a href="#" class="button fullwidth100 nomarginbottom w-button">Copy to clipboard</a></div>
        </div>
      </div>
      <div class="flexpuresides">
        <div class="_50w">
          <h2>Autocomplete fields</h2>
          <p>This script adds an &quot;autocomplete&quot; tag to common fields in your form to help visitors complete them quicker. </p>
        </div>
        <div class="_50w">
          <div class="div-block-153">
            <div class="heightmax w-embed">
              <pre class="language-javascript">
<code>
const inputs = document.getElementsByTagName("input");
for(let item of inputs){
	switch(item.type){
		case "text":
			if((item.name.indexOf("ship") != -1) && (item.name.indexOf("address") != -1)){
				item.autocomplete = "shipping street-address";
			}else if((item.name.indexOf("ship") != -1) && (item.name.indexOf("city") != -1)){
				item.autocomplete = "shipping address-level2";
			}else if((item.name.indexOf("ship") != -1) && (item.name.indexOf("state") != -1)){
				item.autocomplete = "shipping address-level1";
			}else if((item.name.indexOf("ship") != -1) && (item.name.indexOf("country") != -1)){
				item.autocomplete = "shipping country";
			}else if((item.name.indexOf("ship") != -1) && (item.name.indexOf("zip") != -1)){
				item.autocomplete = "shipping postal-code";
			}else if((item.name.indexOf("bill") != -1) && (item.name.indexOf("address") != -1)){
				item.autocomplete = "billing street-address";
			}else if((item.name.indexOf("bill") != -1) && (item.name.indexOf("city") != -1)){
				item.autocomplete = "billing address-level2";
			}else if((item.name.indexOf("bill") != -1) && (item.name.indexOf("state") != -1)){
				item.autocomplete = "billing address-level1";
			}else if((item.name.indexOf("bill") != -1) && (item.name.indexOf("country") != -1)){
				item.autocomplete = "billing country";
			}else if((item.name.indexOf("bill") != -1) && (item.name.indexOf("zip") != -1)){
				item.autocomplete = "billing postal-code";
			}else if(item.name.indexOf("ccname") != -1){
				item.autocomplete = "cc-name";
			}else if(item.name.indexOf("cardnumber") != -1){
				item.autocomplete = "cc-number";
			}else if(item.name.indexOf("cvc") != -1){
				item.autocomplete = "cc-csc";
			}else if(item.name.indexOf("cc-exp") != -1){
				item.autocomplete = "cc-exp";
			}else{
				if(item.previousElementSibling != null){
					item.autocomplete = item.previousElementSibling.innerText.replace(/ /g,'').toLowerCase();
				}else{
					item.autocomplete = item.parentElement.previousElementSibling.innerText.replace(/ /g,'').toLowerCase();
				}
			}
			break;
		case "email":
			item.autocomplete = item.name;
			break;
		case "password":
			item.autocomplete = item.name;
			break;
		case "number":
			item.autocomplete = item.name;
			break;
		case "date":
			item.autocomplete = item.name;
			break;
		case "tel":
			item.autocomplete = item.name;
			break;
		default:
			break;
	}
}
</code>
</pre>
            </div><a href="#" class="button fullwidth100 nomarginbottom w-button">Copy to clipboard</a></div>
        </div>
      </div>
      <div class="flexpuresides">
        <div class="_50w">
          <h2>Convert to local currency</h2>
          <p>Convert the currency on your website to your visitor&#x27;s local curreny with a real-time exchange rate. This variant is purely visual and will not change the checkout proccess on your website.</p>
        </div>
        <div class="_50w">
          <div class="div-block-153">
            <div class="heightmax w-embed">
              <pre class="language-javascript">
<code>
function convert_currency(data){
	var all_tags = document.body.getElementsByTagName("*");
	for(var tag of all_tags){
		for(var item of data){
			if((tag.innerText.indexOf(item.original) != -1) && (tag.childElementCount == 0)){
				tag.innerText = tag.innerText.replace(item.original, item.local_price);
			}
		}
	}
}
var all_texts = document.body.innerText;
var regexp = /\$?((\d{1,3})(?:,[0-9]{3}){0,1}|(\d{1})(?:,[0-9]{3}){0,2}|(\d{1,7}))(\.\d{1,2})?(|\$)?/gm;
var number_values = all_texts.match(regexp);
var price_values = [];
for(var i = 0; i < number_values.length; i++){
	if(number_values[i].indexOf("$") != "-1"){
		price_values.push({
			currency: "USD",
			original: number_values[i],
			price: number_values[i].replace("$", "").replace(",", "")
		})
	}
}
var local = twik_user_data.location.currency;
//var local = "RUB";
var local_currency = twik_user_data.location.currency_symbol;
function convert(data, local, rate){
	for(var item of data){
		if(item.currency == "EUR"){
			item.local_price = local_currency + " " + Number((item.price * rate[local]).toFixed()).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,");
		}else{
			item.local_price = local_currency + " " + Number((item.price / rate[item.currency] * rate[local]).toFixed(2)).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,");
		}
	}
	convert_currency(data);
}
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
       	convert(price_values, local, JSON.parse(xhttp.responseText).rates);
    }
};
xhttp.open("GET", "https://api.exchangeratesapi.io/latest", true);
xhttp.send();
</code>
</pre>
            </div><a href="#" class="button fullwidth100 nomarginbottom w-button">Copy to clipboard</a></div>
        </div>
      </div>
      <div class="maincontentallwidth javascriptsection">
        <div class="signupdiv">
          <div class="div-block-124">
            <div>
              <h2 class="smallerh">Explore more resources</h2>
              <p class="marginbottom36">You can use Twik&#x27;s widgets to create beautiful, effective variants on your website such as popups, shorter forms, and more.</p>
            </div>
            <div><a href="/widgets" class="button w-button">Explore</a></div>
          </div>
          <div class="div-block-124">
            <h2 class="smallerh">Try it now</h2>
            <p class="marginbottom36">See what Twik can do for you with our free 14-day evaluation period, limited to  1,000 pageviews.</p>
            <div><a href="../product.html" class="button w-button">Features</a></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div wp="general" el="shortcode">[udesly-boxes slug=&quot;footer-nav&quot;]<br></div>
  <script src="https://d1tdp7z6w94jbb.cloudfront.net/js/jquery-3.3.1.min.js" type="text/javascript" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="../js/twik-v3.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.16.0/prism.js"></script>
  <script>
      $('.w-embed').next().click(function() { // Copy button.
        var s = window.getSelection();
        var r = document.createRange();
        r.selectNodeContents($(this).parent().find('code')[0]); // The tag that contains the code to be copied.
        s.removeAllRanges();
        s.addRange(r);
        document.execCommand('copy');
        var $this = $(this);
        var originalText = $this.text();
        $this.text('Code copied!').addClass('active');
        setTimeout(function() {
          $this.text(originalText).removeClass('active');
          s.removeAllRanges();
        }, 2000);
      })
    </script>
</body>
</html>